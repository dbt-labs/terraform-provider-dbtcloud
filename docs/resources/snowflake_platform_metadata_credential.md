---
page_title: "dbtcloud_snowflake_platform_metadata_credential Resource - dbtcloud"
subcategory: ""
description: |-
  Manages Snowflake platform metadata credentials for external metadata ingestion in dbt Cloud.
  This resource configures credentials that allow dbt Cloud to connect directly to your Snowflake warehouse
  to ingest metadata outside of normal dbt project runs. This enables features like:
  Catalog Ingestion: Ingest metadata about tables/views not defined in dbtCost Optimization: Query warehouse cost and performance dataCost Insights: Enhanced cost visibility and analysis
  ~> Note: At least one of catalog_ingestion_enabled, cost_optimization_enabled, or
  cost_insights_enabled must be enabled for the credential to be usable.
  ~> Note: The connection_id cannot be changed after creation. To use a different connection,
  you must destroy and recreate the resource.
---

# dbtcloud_snowflake_platform_metadata_credential (Resource)


Manages Snowflake platform metadata credentials for external metadata ingestion in dbt Cloud.

This resource configures credentials that allow dbt Cloud to connect directly to your Snowflake warehouse 
to ingest metadata outside of normal dbt project runs. This enables features like:

- **Catalog Ingestion**: Ingest metadata about tables/views not defined in dbt
- **Cost Optimization**: Query warehouse cost and performance data
- **Cost Insights**: Enhanced cost visibility and analysis

~> **Note:** At least one of `catalog_ingestion_enabled`, `cost_optimization_enabled`, or 
`cost_insights_enabled` must be enabled for the credential to be usable.

~> **Note:** The `connection_id` cannot be changed after creation. To use a different connection, 
you must destroy and recreate the resource.

## Example Usage

```terraform
# Example: Snowflake Platform Metadata Credential with password auth
resource "dbtcloud_snowflake_platform_metadata_credential" "password_auth" {
  connection_id = dbtcloud_global_connection.snowflake.id

  catalog_ingestion_enabled = true
  cost_optimization_enabled = true
  cost_insights_enabled     = false

  auth_type = "password"
  user      = "METADATA_READER"
  password  = var.snowflake_password
  role      = "METADATA_READER_ROLE"
  warehouse = "METADATA_WH"
}

# Example: Snowflake Platform Metadata Credential with keypair auth
resource "dbtcloud_snowflake_platform_metadata_credential" "keypair_auth" {
  connection_id = dbtcloud_global_connection.snowflake.id

  catalog_ingestion_enabled = true
  cost_optimization_enabled = false
  cost_insights_enabled     = false

  auth_type              = "keypair"
  user                   = "METADATA_READER"
  private_key            = var.snowflake_private_key
  private_key_passphrase = var.snowflake_private_key_passphrase
  role                   = "METADATA_READER_ROLE"
  warehouse              = "METADATA_WH"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `auth_type` (String) The authentication type. Must be 'password' or 'keypair'.
- `connection_id` (Number) The ID of the global connection this credential is associated with. Cannot be changed after creation.
- `role` (String) The Snowflake role to use.
- `user` (String) The Snowflake user name.
- `warehouse` (String) The Snowflake warehouse to use.

### Optional

- `catalog_ingestion_enabled` (Boolean) Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
- `cost_insights_enabled` (Boolean) Whether cost insights is enabled for this credential.
- `cost_optimization_enabled` (Boolean) Whether cost optimization data collection is enabled for this credential.
- `password` (String, Sensitive) The password for password authentication. Required when auth_type is 'password'.
- `private_key` (String, Sensitive) The private key for keypair authentication. Required when auth_type is 'keypair'.
- `private_key_passphrase` (String, Sensitive) The passphrase for the private key, if encrypted. Optional when auth_type is 'keypair'.

### Read-Only

- `adapter_version` (String) The adapter version derived from the connection (e.g., 'snowflake_v0', 'databricks_v0'). This is read-only and determined by the connection.
- `credential_id` (Number) The ID of the platform metadata credential.
- `id` (String) The unique identifier for this resource (account_id:credential_id).
