---
page_title: "dbtcloud_databricks_platform_metadata_credential Resource - dbtcloud"
subcategory: ""
description: |-
  Manages Databricks platform metadata credentials for external metadata ingestion in dbt Cloud.
  This resource configures credentials that allow dbt Cloud to connect directly to your Databricks workspace
  to ingest metadata outside of normal dbt project runs. This enables features like:
  Catalog Ingestion: Ingest metadata about tables/views not defined in dbtCost Optimization: Query warehouse cost and performance dataCost Insights: Enhanced cost visibility and analysis
  ~> Note: At least one of catalog_ingestion_enabled, cost_optimization_enabled, or
  cost_insights_enabled must be enabled for the credential to be usable.
  ~> Note: The connection_id cannot be changed after creation. To use a different connection,
  you must destroy and recreate the resource.
---

# dbtcloud_databricks_platform_metadata_credential (Resource)


Manages Databricks platform metadata credentials for external metadata ingestion in dbt Cloud.

This resource configures credentials that allow dbt Cloud to connect directly to your Databricks workspace 
to ingest metadata outside of normal dbt project runs. This enables features like:

- **Catalog Ingestion**: Ingest metadata about tables/views not defined in dbt
- **Cost Optimization**: Query warehouse cost and performance data
- **Cost Insights**: Enhanced cost visibility and analysis

~> **Note:** At least one of `catalog_ingestion_enabled`, `cost_optimization_enabled`, or 
`cost_insights_enabled` must be enabled for the credential to be usable.

~> **Note:** The `connection_id` cannot be changed after creation. To use a different connection, 
you must destroy and recreate the resource.

## Example Usage

```terraform
# Example: Databricks Platform Metadata Credential
resource "dbtcloud_databricks_platform_metadata_credential" "example" {
  connection_id = dbtcloud_global_connection.databricks.id

  catalog_ingestion_enabled = true
  cost_optimization_enabled = false
  cost_insights_enabled     = false

  token   = var.databricks_token
  catalog = "main"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `catalog` (String) The Unity Catalog name to use.
- `connection_id` (Number) The ID of the global connection this credential is associated with. Cannot be changed after creation.
- `token` (String, Sensitive) The Databricks personal access token.

### Optional

- `catalog_ingestion_enabled` (Boolean) Whether catalog ingestion is enabled for this credential. When enabled, dbt Cloud will ingest metadata about tables, views, and other objects from your data warehouse.
- `cost_insights_enabled` (Boolean) Whether cost insights is enabled for this credential.
- `cost_optimization_enabled` (Boolean) Whether cost optimization data collection is enabled for this credential.

### Read-Only

- `adapter_version` (String) The adapter version derived from the connection (e.g., 'snowflake_v0', 'databricks_v0'). This is read-only and determined by the connection.
- `credential_id` (Number) The ID of the platform metadata credential.
- `id` (String) The unique identifier for this resource (account_id:credential_id).
